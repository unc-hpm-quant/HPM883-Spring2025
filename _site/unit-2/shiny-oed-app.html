<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Optimal Experiment Design App â€“ HPM 883</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../quiz-generator/index.html" rel="next">
<link href="../templates.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-1fa1d8026083a9bddc52b4aafc7f818e.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-1fa1d8026083a9bddc52b4aafc7f818e.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-fd9528830c3bd10aadebefd30ea787ae.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-135ac4d113b30199e54d7437fe66c954.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<meta name="shinylive:serviceworker_dir" content="..">
<script src="../site_libs/quarto-contrib/shinylive-0.9.1/shinylive/load-shinylive-sw.js" type="module"></script>
<script src="../site_libs/quarto-contrib/shinylive-0.9.1/shinylive/run-python-blocks.js" type="module"></script>
<link href="../site_libs/quarto-contrib/shinylive-0.9.1/shinylive/shinylive.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/shinylive-quarto-css/shinylive-quarto.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script src="https://unpkg.com/react@18/umd/react.production.min.js"></script><script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script><script src="https://unpkg.com/lodash@4.17.21/lodash.min.js"></script><script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>
</head>
<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../resources.html">Resources</a></li><li class="breadcrumb-item"><a href="../unit-2/shiny-oed-app.html">Optimal Experiment Design App</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto"><div class="pt-lg-2 mt-2 text-center sidebar-header">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../images/logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none"></a>
      <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/hpm883" title="GitHub" class="quarto-navigation-tool px-1" aria-label="GitHub"><i class="bi bi-github"></i></a>
    <a href="https://rstudio.cloud/" title="Rstudio Cloud" class="quarto-navigation-tool px-1" aria-label="Rstudio Cloud"><i class="bi bi-code-square"></i></a>
    <div class="dropdown">
      <a href="" title="Support" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label="Support"><i class="bi bi-life-preserver"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
<li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://placeholder.link/office-hours">
              <i class="bi bi-person-raised-hand pe-1"></i>
            Office hours
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://placeholder.link/help-humans">
              <i class="bi bi-people-fill pe-1"></i>
            Help from humans
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://placeholder.link/chatbot">
              <i class="bi bi-robot pe-1"></i>
            Help from AI (Chatbot)
            </a>
          </li>
      </ul>
</div>
    <a href="https://hpm883.slack.com" title="Slack" class="quarto-navigation-tool px-1" aria-label="Slack"><i class="bi bi-slack"></i></a>
    <div class="dropdown">
      <a href="" title="Canvas" id="quarto-navigation-tool-dropdown-1" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label="Canvas"><i class="bi bi-file-check-fill"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-1">
<li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://placeholder.link/announcements">
              <i class="bi bi-megaphone-fill pe-1"></i>
            Announcements
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://placeholder.link/gradescope">
              <i class="bi bi-file-arrow-up-fill pe-1"></i>
            Gradescope
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://placeholder.link/gradebook">
              <i class="bi bi-alphabet-uppercase pe-1"></i>
            Gradebook
            </a>
          </li>
      </ul>
</div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Schedule</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false">
 <span class="menu-text">Course Information</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../course-overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../course-syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syllabus</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../instructors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Instructors</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../course-communication.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Communication</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false">
 <span class="menu-text">Semester Project</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../project.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Project Description</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ex-simulate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Simulation Example</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false">
 <span class="menu-text">Unit 0: Foundations</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../unit-0/unit-0-foundations-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Unit 0.0: Introduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../unit-0/unit-0-foundations-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Unit 0.1: A Field Experiment in Health Services Research</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../unit-0/unit-0-foundations-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Unit 0.2: Computing for Reproducible Research</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false">
 <span class="menu-text">Unit 1: Internal Validity</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../unit-1/unit-1-internal-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Unit 1.0: Internal Validity</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../labs/lab-1-InternalValidityPO.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 1: The Hospital of Uncertain Outcomes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../unit-1/unit-1-internal-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Unit 1.1: Statistical Conclusion Validity</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../labs/lab-2-Power.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 2: Power by Simulation</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false">
 <span class="menu-text">Unit 2: Design of Experiments</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../unit-2/unit-2-design-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Unit 2.1: Optimal Experimental Design</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../unit-2/unit-2-design-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Unit 2.2: How to Randomize</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../labs/lab-3-design.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 3: Experiment Design</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Resources</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Useful Reference Materials</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../computing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Computing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../templates.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Templates</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../unit-2/shiny-oed-app.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Optimal Experiment Design App</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../quiz-generator/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Random Question Generator</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a></li>
  <li>
<a href="#key-statistical-concepts" id="toc-key-statistical-concepts" class="nav-link" data-scroll-target="#key-statistical-concepts">Key Statistical Concepts</a>
  <ul class="collapse">
<li><a href="#effect-size" id="toc-effect-size" class="nav-link" data-scroll-target="#effect-size">Effect Size</a></li>
  <li><a href="#statistical-power-and-sample-size" id="toc-statistical-power-and-sample-size" class="nav-link" data-scroll-target="#statistical-power-and-sample-size">Statistical Power and Sample Size</a></li>
  <li><a href="#minimum-detectable-effect-mde" id="toc-minimum-detectable-effect-mde" class="nav-link" data-scroll-target="#minimum-detectable-effect-mde">Minimum Detectable Effect (MDE)</a></li>
  <li><a href="#optimal-allocation" id="toc-optimal-allocation" class="nav-link" data-scroll-target="#optimal-allocation">Optimal Allocation</a></li>
  </ul>
</li>
  <li>
<a href="#using-the-app" id="toc-using-the-app" class="nav-link" data-scroll-target="#using-the-app">Using the App</a>
  <ul class="collapse">
<li><a href="#local-rstudio-version" id="toc-local-rstudio-version" class="nav-link" data-scroll-target="#local-rstudio-version">Local RStudio Version</a></li>
  <li><a href="#browser-version" id="toc-browser-version" class="nav-link" data-scroll-target="#browser-version">Browser Version</a></li>
  </ul>
</li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/hpm883/edit/main/unit-2/shiny-oed-app.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/hpm883/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../resources.html">Resources</a></li><li class="breadcrumb-item"><a href="../unit-2/shiny-oed-app.html">Optimal Experiment Design App</a></li></ol></nav><div class="quarto-title">
<h1 class="title">Optimal Experiment Design App</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><section id="overview" class="level2"><h2 class="anchored" data-anchor-id="overview">Overview</h2>
<p>This interactive tool helps you explore optimal experimental design for randomized controlled trials (RCTs) with one treatment and one control group. The app allows you to:</p>
<ol type="1">
<li>Calculate optimal sample sizes for different effect sizes</li>
<li>Compare different allocation ratios between treatment and control groups</li>
<li>Explore cost-constrained designs</li>
</ol></section><section id="key-statistical-concepts" class="level2"><h2 class="anchored" data-anchor-id="key-statistical-concepts">Key Statistical Concepts</h2>
<section id="effect-size" class="level3"><h3 class="anchored" data-anchor-id="effect-size">Effect Size</h3>
<p>The effect size represents the magnitude of the difference between treatment and control groups. Understanding effect size is crucial for: 1. Determining practical significance (not just statistical significance) 2. Planning sample sizes 3. Comparing results across different studies</p>
<section id="for-continuous-outcomes" class="level4"><h4 class="anchored" data-anchor-id="for-continuous-outcomes">For Continuous Outcomes</h4>
<p>Measured as Cohenâ€™s <span class="math inline">\(d\)</span> (standardized mean difference):</p>
<p><span class="math display">\[d = \frac{\mu_T - \mu_C}{\sigma_{\text{pooled}}}\]</span></p>
<p>Typical interpretations:</p>
<ul>
<li>
<strong>Small effect</strong>: ~0.2 (e.g., a small improvement in test scores)</li>
<li>
<strong>Medium effect</strong>: ~0.5 (e.g., noticeable improvement in patient outcomes)</li>
<li>
<strong>Large effect</strong>: ~0.8 (e.g., dramatic improvement in treatment response)</li>
</ul>
<p>The standardization by pooled standard deviation (<span class="math inline">\(\sigma_{\text{pooled}}\)</span>) allows comparison across different scales and measures.</p>
</section><section id="for-binary-outcomes" class="level4"><h4 class="anchored" data-anchor-id="for-binary-outcomes">For Binary Outcomes</h4>
<p>Measured as the difference in proportions (<span class="math inline">\(p_T - p_C\)</span>):</p>
<ul>
<li>
<span class="math inline">\(p_T\)</span> is the success rate in the treatment group</li>
<li>
<span class="math inline">\(p_C\)</span> is the success rate in the control group</li>
</ul>
<p>Example interpretations:</p>
<ul>
<li>A difference of 0.05 (5 percentage points) might be meaningful for rare events</li>
<li>A difference of 0.20 (20 percentage points) might be expected for effective interventions</li>
</ul>
<p>The variance for binary outcomes follows the binomial distribution:</p>
<ul>
<li><span class="math inline">\(\text{Var}(p) = \frac{p(1-p)}{n}\)</span></li>
<li>Larger variance near <span class="math inline">\(p = 0.5\)</span>
</li>
<li>Smaller variance near <span class="math inline">\(p = 0\)</span> or <span class="math inline">\(p = 1\)</span>
</li>
</ul></section></section><section id="statistical-power-and-sample-size" class="level3"><h3 class="anchored" data-anchor-id="statistical-power-and-sample-size">Statistical Power and Sample Size</h3>
<p>The interplay between power, sample size, and effect size forms the foundation of experimental design. These concepts are connected through a fundamental trade-off:</p>
<section id="power-1-beta" class="level4"><h4 class="anchored" data-anchor-id="power-1-beta">Power <span class="math inline">\((1-\beta)\)</span>
</h4>
<p>The probability of detecting a true effect when it exists:</p>
<ul>
<li><p><strong>Definition</strong>: Power <span class="math inline">\(= P(\text{Reject }H_0 \mid H_1 \text{ is true})\)</span></p></li>
<li><p><strong>Interpretation</strong>: The probability of a study finding a real effect</p></li>
<li>
<p><strong>Typical value</strong>: <span class="math inline">\(0.80\)</span> (80%)</p>
<ul>
<li>Lower values (e.g., 70%) increase risk of missing real effects</li>
<li>Higher values (e.g., 90%) require substantially larger sample sizes</li>
</ul>
</li>
</ul></section><section id="type-ii-error-beta" class="level4"><h4 class="anchored" data-anchor-id="type-ii-error-beta">Type II Error <span class="math inline">\((\beta)\)</span>
</h4>
<ul>
<li>
<strong>Definition</strong>: <span class="math inline">\(\beta = P(\text{Fail to reject }H_0 \mid H_1 \text{ is true})\)</span>
</li>
<li>
<strong>Interpretation</strong>: The probability of missing a real effect</li>
<li>
<strong>Relationship</strong>: Power <span class="math inline">\(= 1 - \beta\)</span>
</li>
<li>
<strong>Example</strong>: With 80% power, Î² = 20% chance of missing a real effect</li>
</ul></section><section id="significance-level-alpha" class="level4"><h4 class="anchored" data-anchor-id="significance-level-alpha">Significance Level <span class="math inline">\((\alpha)\)</span>
</h4>
<p>The probability of falsely claiming an effect exists:</p>
<ul>
<li><p><strong>Definition</strong>: <span class="math inline">\(\alpha = P(\text{Reject }H_0 \mid H_0 \text{ is true})\)</span></p></li>
<li><p><strong>Interpretation</strong>: Risk of false positive findings</p></li>
<li>
<p><strong>Common values</strong>:</p>
<ul>
<li>0.05 (5%): Standard for most research</li>
<li>0.01 (1%): More stringent, used for critical decisions</li>
<li>0.10 (10%): Sometimes used in pilot studies</li>
</ul>
</li>
</ul></section><section id="trade-offs" class="level4"><h4 class="anchored" data-anchor-id="trade-offs">Trade-offs</h4>
<ol type="1">
<li>
<p><strong>Sample Size vs.&nbsp;Power</strong>:</p>
<ul>
<li>Larger samples â†’ Higher power</li>
<li>Doubling power often requires more than doubling sample size</li>
</ul>
</li>
<li>
<p><strong>Effect Size vs.&nbsp;Sample Size</strong>:</p>
<ul>
<li>Smaller effects require larger samples</li>
<li>Relationship is quadratic <span class="math inline">\((n \propto 1/d^2)\)</span>
</li>
</ul>
</li>
<li>
<p><strong>Type I vs.&nbsp;Type II Errors</strong>:</p>
<ul>
<li>Reducing one type of error often increases the other</li>
<li>Must balance based on consequences of each error type</li>
</ul>
</li>
</ol></section></section><section id="minimum-detectable-effect-mde" class="level3"><h3 class="anchored" data-anchor-id="minimum-detectable-effect-mde">Minimum Detectable Effect (MDE)</h3>
<p>The MDE is the smallest true effect size that can be detected with the specified power and significance level. For a two-sided test:</p>
<p><span class="math display">\[\text{MDE} = (z_{1-\alpha/2} + z_{1-\beta}) \sqrt{\frac{\text{Var}_T}{n_T} + \frac{\text{Var}_C}{n_C}}\]</span></p>
<p>where:</p>
<ul>
<li>
<span class="math inline">\(z_{1-\alpha/2}\)</span> is the critical value for significance level <span class="math inline">\(\alpha\)</span>
</li>
<li>
<span class="math inline">\(z_{1-\beta}\)</span> is the critical value for power <span class="math inline">\(1-\beta\)</span>
</li>
<li>
<span class="math inline">\(\text{Var}_T\)</span>, <span class="math inline">\(\text{Var}_C\)</span> are the variances in treatment and control groups</li>
<li>
<span class="math inline">\(n_T\)</span>, <span class="math inline">\(n_C\)</span> are the sample sizes in treatment and control groups</li>
</ul></section><section id="optimal-allocation" class="level3"><h3 class="anchored" data-anchor-id="optimal-allocation">Optimal Allocation</h3>
<p>The optimal allocation ratio between treatment and control groups depends on:</p>
<ol type="1">
<li><p><strong>Equal Sample Sizes</strong>: When costs are equal and variances are similar, a 1:1 ratio is optimal</p></li>
<li><p><strong>Unequal Variances</strong>: The optimal ratio is proportional to the standard deviations: <span class="math display">\[\frac{n_T}{n_C} \propto \frac{\sigma_T}{\sigma_C}\]</span></p></li>
<li><p><strong>Unequal Costs</strong>: When costs differ, the optimal ratio is: <span class="math display">\[\frac{n_T}{n_C} \propto \frac{\sigma_T}{\sigma_C} \sqrt{\frac{c_C}{c_T}}\]</span> where <span class="math inline">\(c_T\)</span>, <span class="math inline">\(c_C\)</span> are the per-unit costs</p></li>
</ol></section></section><section id="using-the-app" class="level2"><h2 class="anchored" data-anchor-id="using-the-app">Using the App</h2>
<section id="local-rstudio-version" class="level3"><h3 class="anchored" data-anchor-id="local-rstudio-version">Local RStudio Version</h3>
<p>To run this app locally in RStudio:</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/runApp.html">runApp</a></span><span class="op">(</span><span class="st">"unit-2/oed-app.R"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="browser-version" class="level3"><h3 class="anchored" data-anchor-id="browser-version">Browser Version</h3>
<pre class="shinylive-r" data-engine="r"><code><a href="https://shiny.posit.co/">#| '!! shinylive warning !!': |
#|   shinylive does not work in self-contained HTML documents.
#|   Please set `embed-resources: false` in your metadata.
#| standalone: true
#| viewerHeight: 1500

library(shiny)
library(ggplot2)

ui &lt;- fluidPage(
  titlePanel("Optimal Experimental Design for One Treatment vs. One Control"),
  
  # Add help text at the top
  fluidRow(
    column(12,
      h4("Understanding Power Analysis and Optimal Design"),
      p("This app helps you determine optimal sample sizes and allocation ratios for experiments.",
        "The calculations consider both statistical power and practical constraints."),
      p("Key concepts:"),
      tags$ul(
        tags$li(strong("Minimum Detectable Effect (MDE):"), 
               "The smallest true effect size that your study can reliably detect with the specified power."),
        tags$li(strong("Optimal Allocation:"), 
               "The best way to divide participants between treatment and control groups, considering:",
               tags$ul(
                 tags$li("Statistical efficiency (minimizing MDE)"),
                 tags$li("Cost constraints"),
                 tags$li("Practical implementation"))
               ),
        tags$li(strong("Power vs. Sample Size:"), 
               "There's always a trade-off - higher power requires larger samples.")
      ),
      p("Adjust the parameters below to explore how different choices affect your study design."),
      tags$hr()
    )
  ),
  
  sidebarLayout(
    sidebarPanel(
      # --- Choose outcome type (binary or continuous)
      radioButtons(
        inputId = "outcomeType", 
        label = "Outcome Type",
        choices = c("Binary" = "binary", "Continuous" = "continuous"),
        selected = "continuous"
      ),
      div(class = "well",
        h5("Outcome Types:"),
        p(strong("Binary Outcomes:"),
          "Measured as proportions or percentages (e.g., success rates, mortality rates).",
          "The variance is determined by the proportion itself - highest at p=0.5."),
        p(strong("Continuous Outcomes:"),
          "Measured on a continuous scale (e.g., blood pressure, test scores).",
          "Requires estimates of population variance in each group.")
      ),
      
      # --- Significance level (alpha)
      sliderInput(
        inputId = "alpha", 
        label = "Significance level (alpha):",
        min = 0.001, 
        max = 0.10, 
        step = 0.001,
        value = 0.05
      ),
      div(class = "well",
        h5("Significance Level (Î±):"),
        p("The probability of falsely concluding there is an effect when there isn't one (Type I error)."),
        tags$ul(
          tags$li(strong("0.05 (5%)"), ": Standard choice - 1 in 20 chance of false positive"),
          tags$li(strong("0.01 (1%)"), ": More conservative - use for critical decisions"),
          tags$li(strong("0.10 (10%)"), ": More liberal - might use in pilot studies")
        )
      ),
      
      # --- Power (1 - beta)
      sliderInput(
        inputId = "power", 
        label = "Statistical Power (1 - beta):",
        min = 0.50, 
        max = 0.99, 
        step = 0.01,
        value = 0.80
      ),
      div(class = "well",
        h5("Statistical Power (1-Î²):"),
        p("The probability of detecting a true effect when it exists."),
        tags$ul(
          tags$li(strong("0.80 (80%)"), ": Standard choice - accepts 20% chance of missing real effects"),
          tags$li(strong("0.90 (90%)"), ": Higher power - use for critical studies, but requires larger samples"),
          tags$li(strong("0.70 (70%)"), ": Lower power - might use in pilot studies or with resource constraints")
        ),
        p("Remember: Increasing power requires larger sample sizes, often substantially.")
      ),
      
      # --- Parameters for continuous outcome
      conditionalPanel(
        condition = "input.outcomeType == 'continuous'",
        numericInput("sigmaT", "Treatment Variance (ÏƒÂ²_T):", 1),
        numericInput("sigmaC", "Control Variance (ÏƒÂ²_C):", 1),
        helpText("The expected variances in each group. If unknown, assume equal variances.")
      ),
      
      # --- Parameters for binary outcome
      conditionalPanel(
        condition = "input.outcomeType == 'binary'",
        sliderInput("pT", "Treatment proportion (p_T):",
                    min = 0, max = 1, step = 0.01, value = 0.3),
        sliderInput("pC", "Control proportion (p_C):",
                    min = 0, max = 1, step = 0.01, value = 0.3),
        helpText("Set the difference in these values to determine your minimum detectable effect (MDE).",
                 "p_C might be derived from historical data.")
      ),
      
      # --- Allocation: either fix total sample size or total cost
      radioButtons(
        inputId = "constraintType",
        label = "Constraint Type:",
        choices = c("Fixed Total Sample Size" = "sample",
                    "Fixed Total Cost"        = "cost")
      ),
      div(class = "well",
        h5("Design Constraints:"),
        p(strong("Fixed Total Sample Size:"),
          "Use when you have a specific total number of participants available.",
          "The app will help you determine the optimal split between groups."),
        p(strong("Fixed Total Cost:"),
          "Use when you have a fixed budget and different costs per group.",
          "Common when treatment is more expensive than control, or when recruitment costs differ.")
      ),
      
      # --- If total sample size is the constraint
      conditionalPanel(
        condition = "input.constraintType == 'sample'",
        numericInput("N", "Total Sample Size (N):", 200, min = 2, step = 1)
      ),
      
      # --- If total cost is the constraint
      conditionalPanel(
        condition = "input.constraintType == 'cost'",
        numericInput("costT", "Cost per Treatment Unit:", 2, min = 1, step = 1),
        numericInput("costC", "Cost per Control Unit:", 1, min = 1, step = 1),
        numericInput("budget", "Total Budget:", 300, min = 1, step = 1)
      ),
      
      # --- Option to let the user pick ratio or find optimum
      radioButtons(
        inputId = "ratioChoice",
        label = "Allocation Choice:",
        choices = c("Manually Pick Ratio" = "manual",
                    "Find Optimal Ratio"  = "optimal")
      ),
      
      sliderInput(
        inputId = "ratio",
        label = "Treatment:Control Ratio (r = n_T / n_C):",
        min = 0.1,
        max = 10,
        step = 0.1,
        value = 1
      )
    ),
    
    mainPanel(
      tabsetPanel(
        tabPanel("MDE vs. Ratio", 
                 plotOutput("plotMDE"),
                 br(),
                 verbatimTextOutput("textResult"),
                 br(),
                 h4("Step-by-Step Calculations"),
                 uiOutput("mdeCalcSteps")
        ),
        tabPanel("Cost Allocation Plot",
                 plotOutput("plotCost", height = "500px"),
                 br(),
                 h4("Step-by-Step Calculations"),
                 uiOutput("costCalcSteps"),
                 br(),
                 helpText("This plot shows the budget constraint line ",
                          "and iso-MDE curves for different cost allocations ",
                          "(c_C on the x-axis, c_T on the y-axis). ",
                          "The red point indicates the optimal allocation ",
                          "where MDE is minimized, if available.")
        )
      )
    )
  )
)

server &lt;- function(input, output, session) {
  
  # Helper: z-value for alpha/2 (two-sided) and for power
  zAlpha &lt;- reactive({
    qnorm(1 - input$alpha / 2)
  })
  zBeta &lt;- reactive({
    qnorm(input$power)
  })
  
  # Function to compute MDE given n_C, n_T (the sample sizes)
  computeMDE_from_n &lt;- function(nC, nT) {
    if (input$outcomeType == "continuous") {
      sigmaT &lt;- input$sigmaT
      sigmaC &lt;- input$sigmaC
      varTerm &lt;- sigmaT^2 / nT + sigmaC^2 / nC
    } else {
      pT &lt;- input$pT
      pC &lt;- input$pC
      varTerm &lt;- pT*(1 - pT)/nT + pC*(1 - pC)/nC
    }
    (zAlpha() + zBeta()) * sqrt(varTerm)
  }
  
  # Function to compute MDE given a ratio (for either sample or cost constraint)
  computeMDE_ratio &lt;- function(r) {
    # 1) Determine n_T and n_C based on constraints and ratio
    if (input$constraintType == "sample") {
      # n_T + n_C = N, and n_T / n_C = r
      n_C &lt;- input$N / (r + 1)
      n_T &lt;- r * n_C
    } else {
      # costT * n_T + costC * n_C = budget, n_T / n_C = r
      n_C &lt;- input$budget / (r * input$costT + input$costC)
      n_T &lt;- r * n_C
    }
    
    # 2) Compute MDE
    computeMDE_from_n(n_C, n_T)
  }
  
  # Plot: MDE vs. ratio
  output$plotMDE &lt;- renderPlot({
    # We'll vary r from 0.1 to 10 in increments of 0.1
    rVals &lt;- seq(0.1, 10, by = 0.1)
    mdeVals &lt;- sapply(rVals, computeMDE_ratio)
    
    plot(rVals, mdeVals, type = "l", lwd = 2, 
         xlab = "Ratio (n_T / n_C)", ylab = "MDE",
         main = "Minimum Detectable Effect vs. Allocation Ratio")
    
    # If in manual mode, highlight user's chosen ratio
    if (input$ratioChoice == "manual") {
      rUser &lt;- input$ratio
      userMde &lt;- computeMDE_ratio(rUser)
      points(rUser, userMde, col = "red", pch = 19, cex = 1.5)
    }
  })
  
  # Helper function to format numbers nicely
  format_num &lt;- function(x) format(round(x, 4), nsmall = 4)
  
  # Text output: either user-chosen ratio or optimal ratio
  output$textResult &lt;- renderPrint({
    if (input$ratioChoice == "optimal") {
      # Find ratio that yields smallest MDE
      rTest &lt;- seq(0.1, 10, 0.01)
      mdeTest &lt;- sapply(rTest, computeMDE_ratio)
      idxMin &lt;- which.min(mdeTest)
      rOpt &lt;- rTest[idxMin]
      mdeOpt &lt;- mdeTest[idxMin]
      
      if (input$constraintType == "sample") {
        n_C_opt &lt;- input$N / (rOpt + 1)
        n_T_opt &lt;- rOpt * n_C_opt
      } else {
        n_C_opt &lt;- input$budget / (rOpt * input$costT + input$costC)
        n_T_opt &lt;- rOpt * n_C_opt
      }
      
      cat("Optimal Allocation:\n")
      cat("Optimal ratio (n_T / n_C):", round(rOpt, 3), "\n")
      cat("Control group size (n_C):", round(n_C_opt), "\n")
      cat("Treatment group size (n_T):", round(n_T_opt), "\n")
      cat("Minimum Detectable Effect:", round(mdeOpt, 3), "\n")
      
    } else {
      # User-chosen ratio
      r &lt;- input$ratio
      mde &lt;- computeMDE_ratio(r)
      
      if (input$constraintType == "sample") {
        n_C &lt;- input$N / (r + 1)
        n_T &lt;- r * n_C
      } else {
        n_C &lt;- input$budget / (r * input$costT + input$costC)
        n_T &lt;- r * n_C
      }
      
      cat("Current Allocation:\n")
      cat("Ratio (n_T / n_C):", round(r, 3), "\n")
      cat("Control group size (n_C):", round(n_C), "\n")
      cat("Treatment group size (n_T):", round(n_T), "\n")
      cat("Minimum Detectable Effect:", round(mde, 3), "\n")
    }
  })
  
  # Plot: Cost allocation
  output$plotCost &lt;- renderPlot({
    # Only show this plot if user is in "cost" constraint
    if (input$constraintType == "cost") {
      # Generate grid of n_C, n_T values across full plot range
      max_n_C &lt;- input$budget/input$costC * 1.2  # Extend 20% beyond budget line
      max_n_T &lt;- input$budget/input$costT * 1.2
      n_C &lt;- seq(1, max_n_C, length.out = 100)
      n_T &lt;- seq(1, max_n_T, length.out = 100)
      
      # Create matrix of MDE values
      mde_matrix &lt;- matrix(NA, nrow = length(n_C), ncol = length(n_T))
      for (i in 1:length(n_C)) {
        for (j in 1:length(n_T)) {
          mde_matrix[i,j] &lt;- computeMDE_from_n(n_C[i], n_T[j])
        }
      }
      
      # Find optimal allocation
      rTest &lt;- seq(0.1, 10, 0.01)
      mdeTest &lt;- sapply(rTest, computeMDE_ratio)
      rOpt &lt;- rTest[which.min(mdeTest)]
      n_C_opt &lt;- input$budget / (rOpt * input$costT + input$costC)
      n_T_opt &lt;- rOpt * n_C_opt
      mde_opt &lt;- computeMDE_from_n(n_C_opt, n_T_opt)
      
      # Create the plot
      par(mar = c(5, 5, 4, 2))  # Increase margins for labels
      
      # Calculate reasonable MDE range for contours
      min_mde &lt;- max(min(mde_matrix, na.rm = TRUE), mde_opt * 0.8)  # Don't go too far below optimal
      max_mde &lt;- min(max(mde_matrix, na.rm = TRUE), mde_opt * 2.0)  # Don't show extremely large MDEs
      
      # Create evenly spaced levels, including the optimal MDE
      contour_levels &lt;- sort(unique(c(
        seq(min_mde, max_mde, length.out = 8),  # 8 regular levels
        mde_opt  # Include the optimal MDE level
      )))
      
      # Plot contours
      contour(n_C, n_T, mde_matrix, 
              xlab = "Control Group Size (n_C)",
              ylab = "Treatment Group Size (n_T)",
              main = "Cost-constrained Allocation",
              levels = contour_levels,
              labcex = 0.8,  # Slightly smaller contour labels
              drawlabels = TRUE)
      
      # Add budget constraint line
      budget_line_n_C &lt;- seq(0, max_n_C, length.out = 100)
      budget_line_n_T &lt;- (input$budget - input$costC * budget_line_n_C) / input$costT
      lines(budget_line_n_C, budget_line_n_T, col = "red", lwd = 2)
      
      # Add optimal MDE curve (the contour that passes through optimal point)
      n_C_curve &lt;- seq(1, max_n_C, length.out = 200)
      n_T_curve &lt;- numeric(length(n_C_curve))
      for(i in 1:length(n_C_curve)) {
        # Find n_T that gives the optimal MDE for this n_C
        n_T_test &lt;- seq(1, max_n_T, length.out = 200)
        mde_test &lt;- sapply(n_T_test, function(nt) computeMDE_from_n(n_C_curve[i], nt))
        n_T_curve[i] &lt;- n_T_test[which.min(abs(mde_test - mde_opt))]
      }
      lines(n_C_curve, n_T_curve, col = "blue", lwd = 2, lty = 2)
      
      # Add optimal point
      points(n_C_opt, n_T_opt, col = "red", pch = 19, cex = 1.5)
      
      # Add legend for optimal MDE curve
      legend("topright", 
             legend = sprintf("Optimal MDE = %.3f", mde_opt),
             col = "blue", lwd = 2, lty = 2)
    }
  })
  
  # Render step-by-step MDE calculations
  output$mdeCalcSteps &lt;- renderUI({
    # Get current values
    if (input$ratioChoice == "optimal") {
      rTest &lt;- seq(0.1, 10, 0.01)
      mdeTest &lt;- sapply(rTest, computeMDE_ratio)
      r &lt;- rTest[which.min(mdeTest)]
    } else {
      r &lt;- input$ratio
    }
    
    # Calculate sample sizes
    if (input$constraintType == "sample") {
      n_C &lt;- input$N / (r + 1)
      n_T &lt;- r * n_C
    } else {
      n_C &lt;- input$budget / (r * input$costT + input$costC)
      n_T &lt;- r * n_C
    }
    
    # Calculate variances
    if (input$outcomeType == "continuous") {
      varT &lt;- input$sigmaT^2
      varC &lt;- input$sigmaC^2
      var_term &lt;- varT/n_T + varC/n_C
    } else {
      varT &lt;- input$pT * (1 - input$pT)
      varC &lt;- input$pC * (1 - input$pC)
      var_term &lt;- varT/n_T + varC/n_C
    }
    
    # Critical values
    z_alpha &lt;- qnorm(1 - input$alpha/2)
    z_beta &lt;- qnorm(input$power)
    
    # Final MDE
    mde &lt;- (z_alpha + z_beta) * sqrt(var_term)
    
    # Create step-by-step explanation with LaTeX
    tagList(
      withMathJax(),
      
      h5("1. Sample Size Calculation:"),
      if (input$constraintType == "sample") {
        tagList(
          p(sprintf("With total N = %d and ratio r = %.3f:", input$N, r)),
          withMathJax(sprintf("$$n_C = \\frac{N}{r + 1} = \\frac{%d}{%.3f + 1} = %.1f$$", input$N, r, n_C)),
          withMathJax(sprintf("$$n_T = r \\cdot n_C = %.3f \\cdot %.1f = %.1f$$", r, n_C, n_T))
        )
      } else {
        tagList(
          p(sprintf("With budget = %d, c_T = %d, c_C = %d, and ratio r = %.3f:", 
                    input$budget, input$costT, input$costC, r)),
          withMathJax(sprintf("$$n_C = \\frac{\\text{budget}}{rc_T + c_C} = \\frac{%d}{%.3f \\cdot %d + %d} = %.1f$$", 
                               input$budget, r, input$costT, input$costC, n_C)),
          withMathJax(sprintf("$$n_T = r \\cdot n_C = %.3f \\cdot %.1f = %.1f$$", r, n_C, n_T))
        )
      },
      
      h5("2. Variance Terms:"),
      if (input$outcomeType == "continuous") {
        withMathJax(sprintf("$$\\sigma^2_T = %.3f, \\quad \\sigma^2_C = %.3f$$", varT, varC))
      } else {
        tagList(
          withMathJax(sprintf("$$\\text{Var}_T = p_T(1-p_T) = %.3f(1-%.3f) = %.3f$$", input$pT, input$pT, varT)),
          withMathJax(sprintf("$$\\text{Var}_C = p_C(1-p_C) = %.3f(1-%.3f) = %.3f$$", input$pC, input$pC, varC))
        )
      },
      withMathJax(sprintf("$$\\text{Combined variance} = \\frac{\\text{Var}_T}{n_T} + \\frac{\\text{Var}_C}{n_C} = \\frac{%.3f}{%.1f} + \\frac{%.3f}{%.1f} = %.4f$$",
                          varT, n_T, varC, n_C, var_term)),
      
      h5("3. Critical Values:"),
      withMathJax(sprintf("$$z_{1-\\alpha/2} = %.4f \\quad (\\text{for } \\alpha = %.3f)$$", z_alpha, input$alpha)),
      withMathJax(sprintf("$$z_{1-\\beta} = %.4f \\quad (\\text{for power } = %.3f)$$", z_beta, input$power)),
      
      h5("4. Final MDE Calculation:"),
      withMathJax("$$\\text{MDE} = (z_{1-\\alpha/2} + z_{1-\\beta}) \\sqrt{\\frac{\\text{Var}_T}{n_T} + \\frac{\\text{Var}_C}{n_C}}$$"),
      withMathJax(sprintf("$$\\text{MDE} = (%.4f + %.4f) \\sqrt{%.4f} = %.4f$$", 
                          z_alpha, z_beta, var_term, mde))
    )
  })
  
  # Render step-by-step cost allocation calculations
  output$costCalcSteps &lt;- renderUI({
    if (input$constraintType != "cost") {
      return(p("Step-by-step calculations are shown when using cost constraints."))
    }
    
    # Get current optimal values if in optimal mode
    if (input$ratioChoice == "optimal") {
      rTest &lt;- seq(0.1, 10, 0.01)
      mdeTest &lt;- sapply(rTest, computeMDE_ratio)
      r &lt;- rTest[which.min(mdeTest)]
      n_C &lt;- input$budget / (r * input$costT + input$costC)
      n_T &lt;- r * n_C
      total_cost &lt;- input$costT * n_T + input$costC * n_C
      
      tagList(
        withMathJax(),
        h4("Optimal Cost Allocation:"),
        
        h5("1. Budget Constraint:"),
        withMathJax(sprintf("$$%d = %d n_T + %d n_C$$", 
                           input$budget, input$costT, input$costC)),
        
        h5("2. Optimal Allocation Ratio:"),
        withMathJax(sprintf("$$r = \\frac{n_T}{n_C} = %.3f$$", r)),
        
        h5("3. Sample Sizes:"),
        withMathJax(sprintf("$$n_C = \\frac{\\text{budget}}{rc_T + c_C} = \\frac{%d}{%.3f \\cdot %d + %d} = %.1f$$",
                           input$budget, r, input$costT, input$costC, n_C)),
        withMathJax(sprintf("$$n_T = r \\cdot n_C = %.3f \\cdot %.1f = %.1f$$", 
                           r, n_C, n_T)),
        
        h5("4. Cost Verification:"),
        withMathJax(sprintf("$$\\text{Total cost} = c_T n_T + c_C n_C = %d \\cdot %.1f + %d \\cdot %.1f = %d$$",
                           input$costT, n_T, input$costC, n_C, total_cost))
      )
    } else {
      n_C &lt;- input$budget / (input$ratio * input$costT + input$costC)
      n_T &lt;- input$ratio * n_C
      total_cost &lt;- input$costT * n_T + input$costC * n_C
      
      tagList(
        withMathJax(),
        h4("Manual Cost Allocation:"),
        
        h5("1. Budget Constraint:"),
        withMathJax(sprintf("$$%d = %d n_T + %d n_C$$", 
                           input$budget, input$costT, input$costC)),
        
        h5("2. Fixed Allocation Ratio:"),
        withMathJax(sprintf("$$r = \\frac{n_T}{n_C} = %.3f$$", input$ratio)),
        
        h5("3. Sample Sizes:"),
        withMathJax(sprintf("$$n_C = \\frac{\\text{budget}}{rc_T + c_C} = \\frac{%d}{%.3f \\cdot %d + %d} = %.1f$$",
                           input$budget, input$ratio, input$costT, input$costC, n_C)),
        withMathJax(sprintf("$$n_T = r \\cdot n_C = %.3f \\cdot %.1f = %.1f$$", 
                           input$ratio, n_C, n_T)),
        
        h5("4. Cost Verification:"),
        withMathJax(sprintf("$$\\text{Total cost} = c_T n_T + c_C n_C = %d \\cdot %.1f + %d \\cdot %.1f = %d$$",
                           input$costT, n_T, input$costC, n_C, total_cost))
      )
    }
  })
}

shinyApp(ui = ui, server = server)
</a></code></pre>


</section></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/hpm883\.github\.io");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="../templates.html" class="pagination-link" aria-label="Templates">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Templates</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../quiz-generator/index.html" class="pagination-link" aria-label="Random Question Generator">
        <span class="nav-page-text">Random Question Generator</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>Â© Copyright 2024, Sean Sylvia</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/hpm883/edit/main/unit-2/shiny-oed-app.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/hpm883/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>This page is built with <a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer>


</body></html>